---
phase: 01-theme-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docusaurus.config.js
  - src/css/custom.css
  - src/pages/index.module.css
autonomous: false

must_haves:
  truths:
    - "Visitor sees dark mode by default on first visit (no flash of light theme)"
    - "Site uses a desaturated blue primary color (not default Infima green) on all page types"
    - "Typography uses Inter/system font stack consistently across headings, body, and code"
    - "Code blocks render with appropriate syntax highlighting in both light and dark modes"
    - "Navbar, sidebar, and footer all respect the dark theme without light-mode artifacts"
    - "Landing page hero section uses theme-aware colors (no hardcoded light backgrounds)"
  artifacts:
    - path: "docusaurus.config.js"
      provides: "Dark mode default, Prism themes, Inter font loading"
      contains: "defaultMode.*dark"
    - path: "src/css/custom.css"
      provides: "Custom color palette and typography variables"
      contains: "--ifm-color-primary.*#5b8def"
    - path: "src/pages/index.module.css"
      provides: "Theme-aware hero banner styling"
      contains: "var(--ifm"
  key_links:
    - from: "docusaurus.config.js"
      to: "src/css/custom.css"
      via: "customCss config pointing to custom.css"
      pattern: "customCss.*custom\\.css"
    - from: "src/css/custom.css"
      to: "[data-theme='dark']"
      via: "Dark theme selector with complete variable overrides"
      pattern: "\\[data-theme='dark'\\]"
    - from: "docusaurus.config.js"
      to: "prism-react-renderer"
      via: "Prism theme imports for syntax highlighting"
      pattern: "prismThemes"
---

<objective>
Apply a complete Linear-inspired dark theme foundation to the Docusaurus site: dark mode by default, custom desaturated blue color palette replacing Infima green, modern Inter/system font stack, and consistent Prism syntax highlighting.

Purpose: Transform the default Docusaurus template appearance into a polished, modern dark aesthetic that matches Linear's design language — the visual foundation all subsequent phases build upon.

Output: Site renders dark-by-default with custom colors and typography across landing, docs, category, and 404 pages.
</objective>

<execution_context>
@/Users/ianread/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ianread/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-theme-foundation/01-RESEARCH.md
@docusaurus.config.js
@src/css/custom.css
@src/pages/index.module.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure dark mode default, Prism themes, and Inter font loading</name>
  <files>docusaurus.config.js</files>
  <action>
Modify `docusaurus.config.js` to add three things:

1. **Import Prism themes** at the top of the file (after existing comments):
```javascript
import {themes as prismThemes} from 'prism-react-renderer';
```

2. **Add `colorMode` to `themeConfig`** (inside the themeConfig object, as a new property):
```javascript
colorMode: {
  defaultMode: 'dark',
  disableSwitch: false,
  respectPrefersColorScheme: false,
},
```

3. **Configure Prism syntax highlighting** — replace the existing empty `prism: {}` block:
```javascript
prism: {
  theme: prismThemes.github,
  darkTheme: prismThemes.vsDark,
},
```
Remove the commented-out `lightCodeTheme` and `darkCodeTheme` requires at the top since they are no longer needed.

4. **Add Inter font loading via `headTags`** — add as a new top-level property in the config object (sibling to `themeConfig`, not inside it):
```javascript
headTags: [
  {
    tagName: 'link',
    attributes: {
      rel: 'preconnect',
      href: 'https://fonts.googleapis.com',
    },
  },
  {
    tagName: 'link',
    attributes: {
      rel: 'preconnect',
      href: 'https://fonts.gstatic.com',
      crossorigin: 'anonymous',
    },
  },
  {
    tagName: 'link',
    attributes: {
      rel: 'stylesheet',
      href: 'https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap',
    },
  },
],
```

**Important:** The file currently uses `export default config;` (ESM). The Prism import must also use ESM syntax (`import` not `require`). Keep the existing `require.resolve` calls for sidebar and CSS as they are — Docusaurus config supports mixing these.
  </action>
  <verify>Run `npm run build` from the project root. Build should complete without errors. Verify the output config includes colorMode, prism themes, and headTags by inspecting build output or running `npm start` briefly.</verify>
  <done>docusaurus.config.js has colorMode.defaultMode set to 'dark', Prism themes configured with github/vsDark, and Inter font loaded via headTags. Build passes.</done>
</task>

<task type="auto">
  <name>Task 2: Apply custom color palette, typography, and dark theme CSS variables</name>
  <files>src/css/custom.css, src/pages/index.module.css</files>
  <action>
**File 1: `src/css/custom.css`** — Replace the entire file contents with a complete Linear-inspired theme:

```css
/**
 * Custom theme: Linear-inspired dark aesthetic
 * Replaces default Infima green palette with desaturated blues.
 * Dark mode is the default (set in docusaurus.config.js).
 */

/* ===== Light mode (fallback) ===== */
:root {
  /* Primary: desaturated blue */
  --ifm-color-primary: #4a7eed;
  --ifm-color-primary-dark: #3a6edb;
  --ifm-color-primary-darker: #3064d0;
  --ifm-color-primary-darkest: #2752ab;
  --ifm-color-primary-light: #5c8ef0;
  --ifm-color-primary-lighter: #6c9cf1;
  --ifm-color-primary-lightest: #9dbdf5;

  /* Typography */
  --ifm-font-family-base: 'Inter', system-ui, -apple-system, 'Segoe UI',
    Roboto, 'Helvetica Neue', Arial, sans-serif;
  --ifm-font-family-monospace: 'SF Mono', Monaco, 'Cascadia Code',
    'Roboto Mono', Consolas, 'Courier New', monospace;
  --ifm-font-size-base: 100%;
  --ifm-code-font-size: 95%;
  --ifm-line-height-base: 1.65;
  --ifm-heading-font-weight: 700;

  --docusaurus-highlighted-code-line-bg: rgba(74, 126, 237, 0.1);
}

/* ===== Dark mode (default) ===== */
[data-theme='dark'] {
  /* Backgrounds */
  --ifm-background-color: #0a0f1a;
  --ifm-background-surface-color: #111827;

  /* Primary: desaturated blue — slightly lighter for dark bg contrast */
  --ifm-color-primary: #5b8def;
  --ifm-color-primary-dark: #4a7eed;
  --ifm-color-primary-darker: #3d75ec;
  --ifm-color-primary-darkest: #2562e0;
  --ifm-color-primary-light: #6c9cf1;
  --ifm-color-primary-lighter: #79a5f2;
  --ifm-color-primary-lightest: #9dbdf5;

  /* Text */
  --ifm-font-color-base: #e5e7eb;
  --ifm-font-color-secondary: #9ca3af;
  --ifm-heading-color: #f9fafb;

  /* Navbar */
  --ifm-navbar-background-color: #0a0f1a;
  --ifm-navbar-shadow: 0 1px 0 0 rgba(255, 255, 255, 0.05);
  --ifm-navbar-link-color: #d1d5db;
  --ifm-navbar-link-hover-color: #f9fafb;

  /* Sidebar */
  --ifm-menu-color: #d1d5db;
  --ifm-menu-color-active: #5b8def;
  --ifm-menu-color-background-active: rgba(91, 141, 239, 0.1);
  --ifm-menu-color-background-hover: rgba(255, 255, 255, 0.05);

  /* Footer */
  --ifm-footer-background-color: #060a12;
  --ifm-footer-color: #9ca3af;
  --ifm-footer-link-color: #d1d5db;
  --ifm-footer-link-hover-color: #f9fafb;
  --ifm-footer-title-color: #e5e7eb;

  /* Cards and surfaces */
  --ifm-card-background-color: #111827;
  --ifm-card-border-radius: 8px;

  /* Code blocks */
  --docusaurus-highlighted-code-line-bg: rgba(91, 141, 239, 0.15);
  --ifm-code-background: rgba(91, 141, 239, 0.1);
  --ifm-code-padding-horizontal: 0.4rem;
  --ifm-code-padding-vertical: 0.15rem;
  --ifm-code-border-radius: 4px;

  /* Borders */
  --ifm-hr-background-color: rgba(255, 255, 255, 0.08);
  --ifm-toc-border-color: rgba(255, 255, 255, 0.08);

  /* Table of contents */
  --ifm-color-content-secondary: #9ca3af;

  /* Links */
  --ifm-link-color: #5b8def;
  --ifm-link-hover-color: #79a5f2;
}

/* ===== Global refinements ===== */

/* Smooth font rendering for dark backgrounds */
[data-theme='dark'] body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Subtle border on navbar in dark mode */
[data-theme='dark'] .navbar {
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

/* Clean sidebar appearance */
[data-theme='dark'] .menu__link {
  border-radius: 6px;
  transition: background-color 0.15s ease, color 0.15s ease;
}

/* Softer table-of-contents styling */
[data-theme='dark'] .table-of-contents__link {
  color: var(--ifm-color-content-secondary);
}

[data-theme='dark'] .table-of-contents__link--active {
  color: var(--ifm-color-primary);
}
```

**File 2: `src/pages/index.module.css`** — Replace the hardcoded `background: #c1913d` with theme-aware styling:

```css
/**
 * CSS files with the .module.css suffix will be treated as CSS modules
 * and scoped locally.
 */

.heroBanner {
  padding: 4rem 0;
  text-align: center;
  position: relative;
  overflow: hidden;
  background: var(--ifm-background-surface-color, #111827);
}

@media screen and (max-width: 996px) {
  .heroBanner {
    padding: 2rem;
  }
}

.buttons {
  display: flex;
  align-items: center;
  justify-content: center;
}
```

The `var(--ifm-background-surface-color, #111827)` provides a fallback for light mode where the variable may not be set, but will use the dark surface color by default since dark mode is the default.

**Do NOT change any other files.** The typography and color variables will cascade to all page types (landing, docs, category, 404) via Infima's CSS variable system.
  </action>
  <verify>
Run `npm start` and verify:
1. Homepage loads with dark background (not green/gold)
2. Hero banner uses dark surface color (not #c1913d gold)
3. Navigate to a docs page — text is readable, primary color is blue not green
4. Check a code block page — syntax highlighting renders correctly
5. Run `npm run build` to confirm no CSS errors
  </verify>
  <done>custom.css has complete Linear-inspired palette for both light and dark themes. index.module.css hero uses theme-aware variable. All Infima green removed. Typography uses Inter font stack. Build passes.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Verify dark theme across all page types</name>
  <files>docusaurus.config.js, src/css/custom.css, src/pages/index.module.css</files>
  <action>
**What was built:** Complete dark-by-default Linear-inspired theme with custom blue color palette, Inter typography, and Prism syntax highlighting configured across the entire site.

**Human verification required.** Run `npm start` from the project root and verify in browser:

1. **Landing page** (http://localhost:3000):
   - Page loads in dark mode by default (dark background, light text)
   - Hero banner has dark surface background (not gold #c1913d or green)
   - Primary link/button color is desaturated blue (not Infima green)
   - Inter font is rendering (check in DevTools > Computed > font-family)

2. **Docs page** (http://localhost:3000/docs/intro):
   - Sidebar has dark background, blue active item highlight
   - Body text is light gray (#e5e7eb) on dark background
   - Headings are near-white (#f9fafb)
   - Links are blue, not green

3. **Category page** (http://localhost:3000/docs/category/product):
   - Category cards respect dark theme
   - No white/light backgrounds bleeding through

4. **Code blocks** (any docs page with code):
   - Syntax highlighting renders (VS Dark theme in dark mode)
   - Highlighted lines have subtle blue background

5. **404 page** (http://localhost:3000/nonexistent):
   - Respects dark theme, no light mode flash

6. **Light mode toggle** (click sun/moon icon in navbar):
   - Switching to light mode shows blue palette (not green)
   - Switching back to dark restores dark theme

7. **No light-mode artifacts**:
   - No white flashes on page load
   - Navbar border is subtle, not bright
   - Footer is darker than main background

**Resume signal:** Type "approved" if all checks pass, or describe any issues found.
  </action>
  <verify>Human confirms all 7 verification areas pass visual inspection.</verify>
  <done>Dark theme verified across landing, docs, category, 404, and code block pages. Light mode toggle works. No artifacts.</done>
</task>

</tasks>

<verification>
Phase 1 success is verified when:
- THEME-01: `custom.css` contains desaturated blue palette (#5b8def), not Infima green (#2e8555 / #25c2a0)
- THEME-02: `docusaurus.config.js` contains `defaultMode: 'dark'` and `respectPrefersColorScheme: false`
- THEME-03: `custom.css` contains `--ifm-font-family-base: 'Inter'` and `docusaurus.config.js` loads Inter via headTags
- THEME-04: Hero banner uses CSS variable (not hardcoded color), dark theme variables cover navbar, sidebar, footer, cards, code blocks
- Build completes without errors: `npm run build`
</verification>

<success_criteria>
1. First visit to any page shows dark theme without user interaction
2. No trace of Infima default green (#2e8555, #25c2a0, #3cad6e) remains in custom.css
3. Typography renders in Inter (with system font fallback) across all text
4. Code blocks use VS Dark theme in dark mode, GitHub theme in light mode
5. All page types (landing, docs, category, 404) share consistent dark aesthetic
6. Human verification checkpoint passes
</success_criteria>

<output>
After completion, create `.planning/phases/01-theme-foundation/01-01-SUMMARY.md`
</output>
